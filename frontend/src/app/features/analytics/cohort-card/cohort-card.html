<div class="cohort-container">
  <div class="cohort-header">
    <div class="header-content">
      <h3>ðŸ‘¥ Cohort Analysis</h3>
      <p class="subtitle">Group customers by registration date and analyze behavior</p>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <span>Loading cohort data...</span>
  </div>

  <!-- Content -->
  <ng-container *ngIf="!loading && cohortData">
    <div class="kpi-grid">
      <div class="kpi-item">
        <div class="kpi-value">{{ cohortData.totalUsers }}</div>
        <div class="kpi-label">Total Users</div>
      </div>
      <div class="kpi-item">
        <div class="kpi-value">{{ cohortData.totalCohorts }}</div>
        <div class="kpi-label">Cohorts</div>
      </div>
      <div class="kpi-item">
        <div class="kpi-value">{{ cohortData.activeUsers }}</div>
        <div class="kpi-label">Active Users</div>
      </div>
      <div class="kpi-item">
        <div class="kpi-value">{{ cohortData.avgUsersPerCohort | number:'1.0-0' }}</div>
        <div class="kpi-label">Avg Users/Cohort</div>
      </div>
    </div>

    <div class="chart-section">
      <div class="chart-wrapper">
        <app-chart-kpi-card
          [title]="'Users per Cohort'"
          [value]="cohortData.totalUsers"
          [data]="cohortSeries"
          [xAxisLabels]="barChartLabels"
          [showAxes]="true"
        ></app-chart-kpi-card>
      </div>
    </div>
  </ng-container>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">{{ error }}</div>
</div>
