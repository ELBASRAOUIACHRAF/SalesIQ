<div class="dashboard-layout">
  <div class="dashboard-content">
    <div class="dashboard-header">
      <app-top-bar
        [title]="'Sales Analytics'"
        [tabs]="['Overview','Forecast','Analysis']"
        [activeTab]="'Overview'"
        [dateText]="'Sales Performance Insights'"
        [buttonLabel]="''"
      ></app-top-bar>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner"></div>
      <p>Loading sales data...</p>
    </div>

    <!-- KPI Cards -->
    <div *ngIf="!isLoading" class="kpi-cards">
      <app-kpi-card
        *ngFor="let k of kpis"
        [title]="k.title"
        [value]="k.isCurrency ? formatCurrency(k.value) : formatNumber(k.value)"
        [subtitle]="k.subtitle"
        [change]="k.change"
        [sparkline]="k.sparkline"
        [accentColor]="k.accentColor"
      ></app-kpi-card>
    </div>

    <!-- Sales Trend -->
    <section class="analytics-section">
      <h2 class="section-title">ğŸ“ˆ Sales Trend Analysis</h2>
      <p class="section-description">Analyze sales patterns over time with different granularities</p>
      <div class="component-wrapper">
        <app-sales-trend-chart></app-sales-trend-chart>
      </div>
    </section>

    <!-- Seasonality Analysis -->
    <section class="analytics-section">
      <h2 class="section-title">ğŸŒ¡ï¸ Seasonality Analysis</h2>
      <p class="section-description">Decompose sales data into trend, seasonal, and residual components</p>
      <div class="component-wrapper">
        <app-seasonality-chart></app-seasonality-chart>
      </div>
    </section>

    <!-- Forecasting & Comparison -->
    <section class="analytics-section">
      <h2 class="section-title">ğŸ”® Forecasting & Period Comparison</h2>
      <p class="section-description">Predict future sales and compare performance across periods</p>
      <div class="analytics-grid two-col">
        <app-sales-forecast></app-sales-forecast>
        <app-period-comparison></app-period-comparison>
      </div>
    </section>

    <!-- Growth Rate Analysis -->
    <section class="analytics-section">
      <h2 class="section-title">ğŸ“Š Growth Rate Analysis</h2>
      <p class="section-description">Calculate and visualize sales growth between periods</p>
      <div class="component-wrapper">
        <app-growth-rate-card></app-growth-rate-card>
      </div>
    </section>

    <!-- Anomaly Detection -->
    <section class="analytics-section">
      <h2 class="section-title">âš ï¸ Anomaly Detection</h2>
      <p class="section-description">Identify unusual spikes or drops in sales patterns</p>
      <div class="component-wrapper">
        <app-anomaly-detection></app-anomaly-detection>
      </div>
    </section>

  </div>
</div>

